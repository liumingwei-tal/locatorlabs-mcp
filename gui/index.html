<!--
  LocatorLabs Desktop

  Copyright (c) 2025 Naveen AutomationLabs
  Licensed under the MIT License

  https://www.locator-labs.com
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https: http:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';">
  <title>LocatorLabs</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Panel -->
    <aside class="sidebar-panel" id="sidebarPanel">
      <!-- Resize Handle -->
      <div class="sidebar-resize-handle" id="sidebarResizeHandle"></div>
      <!-- Header -->
      <div class="sidebar-header">
        <div class="header-content">
          <div class="logo-section">
            <span class="logo-icon">‚ö°</span>
            <span class="logo-text">Locator Labs</span>
          </div>
          <div class="header-actions">
            <button class="header-icon-btn po-cart-btn" id="poCartBtn" title="Page Object Cart">
              <span class="po-cart-icon">üì¶</span>
              <span class="po-cart-badge" id="poCartBadge">0</span>
            </button>
            <button class="header-icon-btn" id="themeToggle" title="Toggle Theme">
              <span class="theme-icon">üåô</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Framework Toggle Tabs -->
      <div class="framework-toggle" id="frameworkToggle">
        <button class="framework-btn active" data-framework="playwright">
          <img class="fw-icon" src="https://playwright.dev/img/playwright-logo.svg" alt="Playwright">
          <span>Playwright</span>
        </button>
        <button class="framework-btn" data-framework="selenium">
          <img class="fw-icon" src="https://selenium.dev/images/selenium_logo_square_green.png" alt="Selenium">
          <span>Selenium</span>
        </button>
        <button class="framework-btn" data-framework="cypress">
          <img class="fw-icon" src="https://www.cypress.io/images/layouts/cypress-logo.svg" alt="Cypress">
          <span>Cypress</span>
        </button>
      </div>

      <!-- Tool Selection Checkboxes -->
      <div class="tool-selection-section">
        <div class="tool-selection-header">
          <span class="tool-icon">üîß</span>
          <span class="tool-title">Show Code For:</span>
        </div>
        <div class="tool-checkboxes">
          <label class="tool-checkbox-label">
            <input type="checkbox" class="tool-checkbox" data-framework="playwright" checked>
            <span class="tool-checkbox-custom"></span>
            <img class="fw-icon" src="https://playwright.dev/img/playwright-logo.svg" alt="Playwright">
            <span>Playwright</span>
          </label>
          <label class="tool-checkbox-label">
            <input type="checkbox" class="tool-checkbox" data-framework="selenium" checked>
            <span class="tool-checkbox-custom"></span>
            <img class="fw-icon" src="https://selenium.dev/images/selenium_logo_square_green.png" alt="Selenium">
            <span>Selenium</span>
          </label>
          <label class="tool-checkbox-label">
            <input type="checkbox" class="tool-checkbox" data-framework="cypress" checked>
            <span class="tool-checkbox-custom"></span>
            <img class="fw-icon" src="https://www.cypress.io/images/layouts/cypress-logo.svg" alt="Cypress">
            <span>Cypress</span>
          </label>
        </div>
        <div class="tool-selection-hint" id="toolSelectionHint">Select at least one framework</div>
      </div>

      <!-- Language Toggle -->
      <div class="language-toggle" id="languageToggle">
        <button class="lang-btn active" data-lang="javascript" data-frameworks="playwright,cypress">
          <img class="lang-icon" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg" alt="TypeScript">
          <span>JavaScript/TypeScript</span>
        </button>
        <button class="lang-btn" data-lang="python" data-frameworks="playwright,selenium">
          <img class="lang-icon" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" alt="Python">
          <span>Python</span>
        </button>
        <button class="lang-btn" data-lang="java" data-frameworks="selenium">
          <img class="lang-icon" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" alt="Java">
          <span>Java</span>
        </button>
      </div>

      <!-- Inspect Mode Toggle -->
      <div class="inspect-toggle">
        <button class="inspect-btn" id="inspectBtn">
          <span class="inspect-icon">üéØ</span>
          <span>Start Inspecting</span>
        </button>
      </div>

      <!-- Test Locator Section -->
      <div class="test-locator-section">
        <div class="section-header">
          <span class="section-icon">üîç</span>
          <span class="section-title">Test Locator</span>
        </div>
        <div class="test-locator-input-wrapper">
          <input type="text" class="test-locator-input" id="testLocatorInput" placeholder="e.g., page.getByRole('textbox', { name: 'user' })" autocomplete="off">
          <button class="test-locator-btn" id="testLocatorBtn" title="Test Locator">‚ñ∂</button>
          <button class="test-locator-reset-btn" id="testLocatorResetBtn" title="Reset">‚Ü∫</button>
          <div class="autocomplete-dropdown" id="autocompleteDropdown"></div>
        </div>
        <div class="test-locator-result" id="testLocatorResult"></div>
      </div>

      <!-- Element Info Card -->
      <div class="element-info-card" id="elementInfo">
        <div class="info-header">
          <span class="info-icon">üì¶</span>
          <span class="info-title">Selected Element</span>
        </div>
        <div class="info-content">
          <div class="element-tag" id="elementTag">No element selected</div>
          <div class="element-details" id="elementDetails"></div>
          <div class="playwright-frame-info" id="playwrightFrameInfo"></div>
          <div class="frame-switch-info" id="frameSwitchInfo"></div>
          <div class="shadow-dom-info" id="shadowDOMInfo"></div>
          <div class="svg-info" id="svgInfo"></div>
        </div>
      </div>

      <!-- Locators Container -->
      <div class="locators-container" id="locatorsContainer">
        <div class="section-header">
          <span class="section-icon">üîç</span>
          <span class="section-title">Generated Locators</span>
        </div>
        <div class="locators-list" id="locatorsList">
          <div class="empty-state">
            <span class="empty-icon">üëÜ</span>
            <p>Click "Start Inspecting" and select an element in the browser</p>
          </div>
        </div>
      </div>

      <!-- Footer Branding -->
      <div class="sidebar-footer">
        <span class="footer-brand">Naveen Automation Labs</span>
      </div>
    </aside>

    <!-- Browser View Area -->
    <main class="browser-area">
      <!-- Tab Bar -->
      <div class="tab-bar" id="tabBar">
        <div class="tabs-container" id="tabsContainer">
          <div class="tab active" data-tab-id="tab-1">
            <span class="tab-title">New Tab</span>
            <button class="tab-close" title="Close tab">√ó</button>
          </div>
        </div>
        <button class="new-tab-btn" id="newTabBtn" title="Open new tab">+</button>
      </div>

      <!-- PO Mode Status Bar -->
      <div class="po-mode-status-bar" id="poModeStatusBar">
        <span class="po-status-icon">üéØ</span>
        <span class="po-status-text"><strong>PO Mode Active</strong> - Click on elements to add</span>
        <span class="po-status-hint">Press ESC to exit</span>
      </div>

      <!-- URL Bar -->
      <div class="url-bar">
        <button class="nav-btn" id="backBtn" title="Go Back">‚Üê</button>
        <button class="nav-btn" id="forwardBtn" title="Go Forward">‚Üí</button>
        <button class="nav-btn" id="refreshBtn" title="Refresh">üîÑ</button>
        <div class="url-input-wrapper">
          <span class="url-icon">üîí</span>
          <input type="text" class="url-input" id="urlInput" placeholder="Enter URL (e.g., https://example.com)" value="https://www.locator-labs.com" autocomplete="off">
          <div class="url-suggestions" id="urlSuggestions"></div>
        </div>
        <button class="go-btn" id="goBtn">Go</button>
        <div class="po-mode-controls">
          <button class="po-mode-btn" id="poModeBtn" title="Page Object Mode - Click elements to auto-add best locators">
            <span class="po-mode-icon">PO</span>
          </button>
          <button class="po-mode-settings-btn" id="poModeSettingsBtn" title="PO Mode Settings">
            <span class="settings-icon">‚öôÔ∏è</span>
          </button>
        </div>
        <button class="devtools-btn" id="devToolsBtn" title="Open DevTools">üõ†Ô∏è</button>
      </div>

      <!-- Webview Container -->
      <div class="webview-container" id="webviewContainer">
        <webview id="webview-tab-1" class="tab-webview active" src="https://www.locator-labs.com" allowpopups></webview>
      </div>
    </main>
  </div>

  <!-- Page Object Modal -->
  <div class="po-modal-overlay" id="poModal">
    <div class="po-modal">
      <div class="po-modal-header">
        <h3 class="po-modal-title">Generate Page Object</h3>
        <button class="po-modal-close" id="poModalClose" title="Close">√ó</button>
      </div>
      <div class="po-modal-body">
        <div class="po-form-group">
          <label class="po-form-label" for="poPageName">Page Name *</label>
          <input type="text" class="po-form-input" id="poPageName" placeholder="e.g., LoginPage, HomePage" autocomplete="off">
        </div>
        <div class="po-form-group">
          <label class="po-form-label" for="poFrameworkSelect">Framework & Language</label>
          <select class="po-form-select" id="poFrameworkSelect">
            <optgroup label="Playwright">
              <option value="playwright-ts" selected>Playwright - TypeScript</option>
              <option value="playwright-js">Playwright - JavaScript</option>
              <option value="playwright-python">Playwright - Python</option>
            </optgroup>
            <optgroup label="Selenium">
              <option value="selenium-java">Selenium - Java</option>
              <option value="selenium-python">Selenium - Python</option>
            </optgroup>
            <optgroup label="Cypress">
              <option value="cypress-js">Cypress - JavaScript</option>
              <option value="cypress-ts">Cypress - TypeScript</option>
            </optgroup>
            <optgroup label="Other Frameworks">
              <option value="webdriverio">WebdriverIO</option>
              <option value="robot">Robot Framework</option>
            </optgroup>
          </select>
        </div>
        <div class="po-form-group">
          <div class="po-elements-header">
            <label class="po-form-label" id="poSelectedCount">Elements (0)</label>
            <div class="po-elements-actions">
              <button class="po-action-btn" id="poSelectAll">Select All</button>
              <button class="po-action-btn" id="poDeselectAll">Deselect All</button>
              <button class="po-action-btn danger" id="poClearAll">Clear All</button>
            </div>
          </div>
          <div class="po-elements-list" id="poElementsList">
            <!-- Elements will be rendered here dynamically -->
          </div>
        </div>
      </div>
      <div class="po-modal-footer">
        <button class="po-btn secondary" id="poModalCancel">Cancel</button>
        <button class="po-btn primary outline" id="poCopyBtn">üìã Copy to Clipboard</button>
        <button class="po-btn primary" id="poGenerateBtn">‚¨á Download File</button>
      </div>
    </div>
  </div>

  <!-- PO Mode Settings Modal -->
  <div class="po-settings-modal-overlay" id="poSettingsModal">
    <div class="po-settings-modal">
      <div class="po-settings-modal-header">
        <h3 class="po-settings-modal-title">PO Mode Settings</h3>
        <button class="po-settings-modal-close" id="poSettingsModalClose" title="Close">√ó</button>
      </div>
      <div class="po-settings-modal-body">
        <div class="po-settings-section">
          <h4 class="po-settings-section-title">
            <img class="fw-icon" src="https://playwright.dev/img/playwright-logo.svg" alt="Playwright">
            Playwright Locator Preferences
          </h4>
          <p class="po-settings-section-desc">Select which locator types to include and drag to reorder priority (highest priority first)</p>
          <div class="po-settings-locator-list" id="playwrightLocatorList">
            <div class="po-settings-locator-item" data-locator="getByRole">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="pw-getByRole" checked>
              <label for="pw-getByRole">getByRole</label>
              <span class="locator-badge best">BEST</span>
            </div>
            <div class="po-settings-locator-item" data-locator="getByLabel">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="pw-getByLabel" checked>
              <label for="pw-getByLabel">getByLabel</label>
              <span class="locator-badge best">BEST</span>
            </div>
            <div class="po-settings-locator-item" data-locator="getByTestId">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="pw-getByTestId" checked>
              <label for="pw-getByTestId">getByTestId</label>
              <span class="locator-badge best">BEST</span>
            </div>
            <div class="po-settings-locator-item" data-locator="getByPlaceholder">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="pw-getByPlaceholder" checked>
              <label for="pw-getByPlaceholder">getByPlaceholder</label>
              <span class="locator-badge good">GOOD</span>
            </div>
            <div class="po-settings-locator-item" data-locator="getByText">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="pw-getByText" checked>
              <label for="pw-getByText">getByText</label>
              <span class="locator-badge good">GOOD</span>
            </div>
            <div class="po-settings-locator-item" data-locator="ID">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="pw-ID" checked>
              <label for="pw-ID">ID (CSS)</label>
              <span class="locator-badge good">GOOD</span>
            </div>
            <div class="po-settings-locator-item" data-locator="CSS">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="pw-CSS">
              <label for="pw-CSS">CSS Selector</label>
              <span class="locator-badge ok">OK</span>
            </div>
            <div class="po-settings-locator-item" data-locator="XPath">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="pw-XPath">
              <label for="pw-XPath">XPath</label>
              <span class="locator-badge fragile">FRAGILE</span>
            </div>
          </div>
        </div>

        <div class="po-settings-section">
          <h4 class="po-settings-section-title">
            <img class="fw-icon" src="https://selenium.dev/images/selenium_logo_square_green.png" alt="Selenium">
            Selenium Locator Preferences
          </h4>
          <p class="po-settings-section-desc">Select which locator types to include and drag to reorder priority</p>
          <div class="po-settings-locator-list" id="seleniumLocatorList">
            <div class="po-settings-locator-item" data-locator="ID">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="se-ID" checked>
              <label for="se-ID">By.id</label>
              <span class="locator-badge best">BEST</span>
            </div>
            <div class="po-settings-locator-item" data-locator="Name">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="se-Name" checked>
              <label for="se-Name">By.name</label>
              <span class="locator-badge best">BEST</span>
            </div>
            <div class="po-settings-locator-item" data-locator="LinkText">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="se-LinkText" checked>
              <label for="se-LinkText">By.linkText</label>
              <span class="locator-badge good">GOOD</span>
            </div>
            <div class="po-settings-locator-item" data-locator="CSS">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="se-CSS" checked>
              <label for="se-CSS">By.cssSelector</label>
              <span class="locator-badge good">GOOD</span>
            </div>
            <div class="po-settings-locator-item" data-locator="XPath">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="se-XPath">
              <label for="se-XPath">By.xpath</label>
              <span class="locator-badge ok">OK</span>
            </div>
            <div class="po-settings-locator-item" data-locator="ClassName">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="se-ClassName">
              <label for="se-ClassName">By.className</label>
              <span class="locator-badge fragile">FRAGILE</span>
            </div>
          </div>
        </div>

        <div class="po-settings-section">
          <h4 class="po-settings-section-title">
            <img class="fw-icon" src="https://www.cypress.io/images/layouts/cypress-logo.svg" alt="Cypress">
            Cypress Locator Preferences
          </h4>
          <p class="po-settings-section-desc">Select which locator types to include and drag to reorder priority</p>
          <div class="po-settings-locator-list" id="cypressLocatorList">
            <div class="po-settings-locator-item" data-locator="data-testid">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="cy-data-testid" checked>
              <label for="cy-data-testid">data-testid</label>
              <span class="locator-badge best">BEST</span>
            </div>
            <div class="po-settings-locator-item" data-locator="ID">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="cy-ID" checked>
              <label for="cy-ID">ID (#id)</label>
              <span class="locator-badge best">BEST</span>
            </div>
            <div class="po-settings-locator-item" data-locator="contains">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="cy-contains" checked>
              <label for="cy-contains">cy.contains()</label>
              <span class="locator-badge good">GOOD</span>
            </div>
            <div class="po-settings-locator-item" data-locator="CSS">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="cy-CSS" checked>
              <label for="cy-CSS">CSS Selector</label>
              <span class="locator-badge good">GOOD</span>
            </div>
            <div class="po-settings-locator-item" data-locator="XPath">
              <span class="drag-handle">‚ãÆ‚ãÆ</span>
              <input type="checkbox" id="cy-XPath">
              <label for="cy-XPath">XPath</label>
              <span class="locator-badge fragile">FRAGILE</span>
            </div>
          </div>
        </div>
      </div>
      <div class="po-settings-modal-footer">
        <button class="po-btn secondary" id="poSettingsReset">Reset to Defaults</button>
        <button class="po-btn primary" id="poSettingsSave">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- Tour Guide Welcome Modal -->
  <div class="tour-welcome-overlay" id="tourWelcomeOverlay">
    <div class="tour-welcome-modal">
      <img class="tour-welcome-icon" src="../assets/icon.ico" alt="Locator Labs">
      <h2 class="tour-welcome-title">Welcome to Locator Labs!</h2>
      <p class="tour-welcome-desc">
        Learn how to inspect elements, generate locators, and build page objects
        with our quick interactive tour.
      </p>
      <div class="tour-welcome-buttons">
        <button class="tour-welcome-btn skip" id="tourSkipBtn">Skip Tour</button>
        <button class="tour-welcome-btn start" id="tourStartBtn">Start Tour</button>
      </div>
    </div>
  </div>

  <!-- Tour Guide Elements -->
  <div class="tour-spotlight" id="tourSpotlight"></div>
  <div class="tour-tooltip" id="tourTooltip">
    <div class="tour-header">
      <div class="tour-icon" id="tourIcon">üéØ</div>
      <div class="tour-title" id="tourTitle">Step Title</div>
    </div>
    <div class="tour-content" id="tourContent">
      Step description goes here.
    </div>
    <div class="tour-progress" id="tourProgress"></div>
    <div class="tour-footer">
      <div class="tour-step-info" id="tourStepInfo">Step 1 of 7</div>
      <div class="tour-buttons">
        <button class="tour-btn skip" id="tourSkipStepBtn">Skip</button>
        <button class="tour-btn prev" id="tourPrevBtn">Previous</button>
        <button class="tour-btn next" id="tourNextBtn">Next</button>
      </div>
    </div>
  </div>

  <!-- Tour Help Button (to restart tour) -->
  <button class="tour-help-btn" id="tourHelpBtn" title="Start Tour">?</button>

  <script src="locator-generator.js"></script>
  <script src="renderer.js"></script>
</body>
</html>
